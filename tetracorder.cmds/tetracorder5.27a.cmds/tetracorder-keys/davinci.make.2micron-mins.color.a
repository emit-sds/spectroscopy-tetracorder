#!/usr/local/bin/davinci -f


a1=read(filename="results.dual.group.2um/beidellite_gds123.fd.ovrly.dual.gstr.jpg")
a2=read(filename="results.dual.group.2um/beidellite_gds124.fd.ovrly.dual.gstr.jpg")
a3=read(filename="results.dual.group.2um/montna.fd.ovrly.dual.gstr.jpg")
a=a1+a2+a3   # montmorillonite group 2.2um

a1=read(filename="results.dual.group.2um/nontronite.fd.ovrly.dual.gstr.jpg")
a2=read(filename="results.dual.group.2um/montmorillonite_fe.fd.ovrly.dual.gstr.jpg")
b=a1+a2      # montmorillonite group 2.3um

a1=read(filename="results.dual.group.2um/biotite.fd.ovrly.dual.gstr.jpg")
a2=read(filename="results.dual.group.2um/palygorskite.fd.ovrly.dual.gstr.jpg")
a3=read(filename="results.dual.group.2um/muscovite-low-Al.fd.ovrly.dual.gstr.jpg")
a4=read(filename="results.dual.group.2um/muscovite-med-Al.fd.ovrly.dual.gstr.jpg")
a5=read(filename="results.dual.group.2um/muscovite-medhigh-Al.fd.ovrly.dual.gstr.jpg")
a6=read(filename="results.dual.group.2um/illite.fd.ovrly.dual.gstr.jpg")
a7=read(filename="results.dual.group.2um/paragonite.fd.ovrly.dual.gstr.jpg")
c=a1+a2+a3+a4+a5+a6+a7    # phyllosilicates

a1=read(filename="results.dual.group.2um/chalcedony.fd.ovrly.dual.gstr.jpg")
a2=read(filename="results.dual.group.2um/hydrated_basaltic_glass.fd.ovrly.dual.gstr.jpg")
d=a1+a2      #  Si-OH hydrated silica

a1=read(filename="results.dual.group.2um/halloy.fd.ovrly.dual.gstr.jpg")
a2=read(filename="results.dual.group.2um/kaolpxl.fd.ovrly.dual.gstr.jpg")
a3=read(filename="results.dual.group.2um/kaolwxl.fd.ovrly.dual.gstr.jpg")
e=a1+a2+a3   # kaolinite group

a1=read(filename="results.dual.group.2um/alunite.5+kaol.5.fd.ovrly.dual.gstr.jpg")
a2=read(filename="results.dual.group.2um/alunite+kaolinite.muscovite.added.fd.ovrly.dual.gstr.jpg")
a3=read(filename="results.dual.group.2um/Kalun+kaol.intmx.fd.ovrly.dual.gstr.jpg")
a4=read(filename="results.dual.group.2um/kaol.75+alun.25.fd.ovrly.dual.gstr.jpg")
a5=read(filename="results.dual.group.2um/Na-alun+kaol.intmx.fd.ovrly.dual.gstr.jpg")
a6=read(filename="results.dual.group.2um/alunite.33+kaol.33+musc.33.fd.ovrly.dual.gstr.jpg")
f=a1+a2+a3+a4+a5+a6     # kaolin+alunite

a1=read(filename="results.dual.group.2um/alun35K65Na.low.fd.ovrly.dual.gstr.jpg")
a2=read(filename="results.dual.group.2um/alun66K34Na.low.fd.ovrly.dual.gstr.jpg")
a3=read(filename="results.dual.group.2um/alun73K27Na.low.fd.ovrly.dual.gstr.jpg")
a4=read(filename="results.dual.group.2um/kalun150c.fd.ovrly.dual.gstr.jpg")
a5=read(filename="results.dual.group.2um/kalun250c.fd.ovrly.dual.gstr.jpg")
a6=read(filename="results.dual.group.2um/kalun450c.fd.ovrly.dual.gstr.jpg")
g=a1+a2+a3+a4+a5+a6     #  K-alunite

a1=read(filename="results.dual.group.2um/alunNa03.fd.ovrly.dual.gstr.jpg")
a2=read(filename="results.dual.group.2um/alunNa56450c.fd.ovrly.dual.gstr.jpg")
a3=read(filename="results.dual.group.2um/alunNa78.450c.fd.ovrly.dual.gstr.jpg")
a4=read(filename="results.dual.group.2um/na40alun400c.fd.ovrly.dual.gstr.jpg")
a5=read(filename="results.dual.group.2um/na63alun300c.fd.ovrly.dual.gstr.jpg")
a6=read(filename="results.dual.group.2um/na82alun100c.fd.ovrly.dual.gstr.jpg")
a7=read(filename="results.dual.group.2um/naalun150c.fd.ovrly.dual.gstr.jpg")
a8=read(filename="results.dual.group.2um/naalun300c.fd.ovrly.dual.gstr.jpg")
a9=read(filename="results.dual.group.2um/naalun450c.fd.ovrly.dual.gstr.jpg")
aa=read(filename="results.dual.group.2um/ammonalun.fd.ovrly.dual.gstr.jpg")
h=a1+a2+a3+a4+a5+a6+a7+a8+a9+aa    # Na-alunite

a1=read(filename="results.dual.group.2um/alunite.5+musc.5.fd.ovrly.dual.gstr.jpg")
a2=read(filename="results.dual.group.2um/alunite+kaolinite.muscovite.added.fd.ovrly.dual.gstr.jpg")
a3=read(filename="results.dual.group.2um/alunite+musc+pyroph.fd.ovrly.dual.gstr.jpg")
a4=read(filename="results.dual.group.2um/alunite+pyrophyl.fd.ovrly.dual.gstr.jpg")
a5=read(filename="results.dual.group.2um/Kalun+kaol.intmx.fd.ovrly.dual.gstr.jpg")
i=a1+a2+a3+a4+a5       # Alunite+other

a1=read(filename="results.dual.group.2um/calcite0.7+kaol0.3.fd.ovrly.dual.gstr.jpg")
a2=read(filename="results.dual.group.2um/kaol.75+pyroph.25.fd.ovrly.dual.gstr.jpg")
a3=read(filename="results.dual.group.2um/kaolin.3+smect.7.fd.ovrly.dual.gstr.jpg")
a4=read(filename="results.dual.group.2um/kaolin.5+muscov.medAl.fd.ovrly.dual.gstr.jpg")
a5=read(filename="results.dual.group.2um/kaolin.5+muscov.medhighAl.fd.ovrly.dual.gstr.jpg")
a6=read(filename="results.dual.group.2um/kaolin.5+smect.5.fd.ovrly.dual.gstr.jpg")
a7=read(filename="results.dual.group.2um/kaolinite.3+.5+smectite.5+.7.added.fd.ovrly.dual.gstr.jpg")
a8=read(filename="results.dual.group.2um/kaolinite+muscovite.added.fd.ovrly.dual.gstr.jpg")
a9=read(filename="results.dual.group.2um/kaolin+musc.intimat.fd.ovrly.dual.gstr.jpg")
j=a1+a2+a3+a4+a5+a6+a7+a8+a9   # kaolin+other

a1=read(filename="results.dual.group.2um/jarosite-K.fd.ovrly.dual.gstr.jpg")
a2=read(filename="results.dual.group.2um/jarosite-lowT.fd.ovrly.dual.gstr.jpg")
a3=read(filename="results.dual.group.2um/jarosite-Na.fd.ovrly.dual.gstr.jpg")
k=a1+a2+a3   # jarosite

a1=read(filename="results.dual.group.2um/kiesserite.fd.ovrly.dual.gstr.jpg")
a2=read(filename="results.dual.group.2um/szomolnokite.fd.ovrly.dual.gstr.jpg")
a3=read(filename="results.dual.group.2um/szomolnokite_heated.fd.ovrly.dual.gstr.jpg")
a4=read(filename="results.dual.group.2um/gypsum.fd.ovrly.dual.gstr.jpg")
l=a1+a2+a3+a4    # sulfates: kiesserite szomolnokite gypsum

a1=read(filename="results.dual.group.2um/perchlorate_mg.fd.ovrly.dual.gstr.jpg")
a2=read(filename="results.dual.group.2um/portlandite.fd.ovrly.dual.gstr.jpg")
m=a1+a2            # perchlorate, 2.4 features


gbase=read(filename=$1)

# /info/COLORS.screen.to.printers
#
#      "color"         r    g    b
# a  1 red            255   60    0   (255   50    0 better)
# b  2 green           60  255    0
# c  3 blue             0  105  255
#   
# d  4 yellow         255  255    0
# e  5 magenta        205   60  255
# f  6 cyan             0  255  255
#  
# g  7 army green     150  165    0   (160  175    0 better?)
# h  8 salmon         255  170  170
# i  9 flesh          255  200  155
#  
# j 10 orange         255  110    0   (255  140    0 better?)
# k 11 deep pink      235    0  180
# l 12 yellow green   190  255    0
#
# m 13 lavender       185  120  255
# n 14 sky blue       140  210  255
# o 15 pale sea green 110  255  190
#  
# p 16 white          255  255  255
# q 17 red-pink       255  125  125
# s 18 gold           255  213    0
#
# t 19 mud yellow     186  165    0
# u 20 light pink     255  211  255
#

#  a    montmorillonite group 2.2um      blue
#  b    montmorillonite group 2.3um      sky blue
#  c    phyllosilicates                  green
#  d    Si-OH hydrated silica            white
#  e    kaolinite group                  yellow
#  f    kaolin+alunite                   mud-yellow
#  g    K-alunite                        red
#  h    Na-alunite                       pink
#  i    Alunite+other                    orange
#  j    kaolin+other                     army green
#  k    jarosite                         cyan
#  l    sulfates: kiess szomol gypsum    magenta
#  m    perchlorate, 2.4 features        lavender


argb =  create(1,1,3, format=FLOAT, start=0.0, step=0.0)
brgb =  create(1,1,3, format=FLOAT, start=0.0, step=0.0)
crgb =  create(1,1,3, format=FLOAT, start=0.0, step=0.0)
drgb =  create(1,1,3, format=FLOAT, start=0.0, step=0.0)
ergb =  create(1,1,3, format=FLOAT, start=0.0, step=0.0)
frgb =  create(1,1,3, format=FLOAT, start=0.0, step=0.0)
grgb =  create(1,1,3, format=FLOAT, start=0.0, step=0.0)
hrgb =  create(1,1,3, format=FLOAT, start=0.0, step=0.0)
irgb =  create(1,1,3, format=FLOAT, start=0.0, step=0.0)
jrgb =  create(1,1,3, format=FLOAT, start=0.0, step=0.0)
krgb =  create(1,1,3, format=FLOAT, start=0.0, step=0.0)
lrgb =  create(1,1,3, format=FLOAT, start=0.0, step=0.0)
mrgb =  create(1,1,3, format=FLOAT, start=0.0, step=0.0)

# Colors:
#              Red                  Green                Blue

argb[1,1,1] =    0. ; argb[1,1,2]=   105. ;  argb[1,1,3]= 255.   # blue
brgb[1,1,1] =  140. ; brgb[1,1,2]=   210. ;  brgb[1,1,3]= 255.   # sky blue
crgb[1,1,1] =   60. ; crgb[1,1,2]=   255. ;  crgb[1,1,3]=   0.   # green
drgb[1,1,1] =  255. ; drgb[1,1,2]=   255. ;  drgb[1,1,3]= 255.   # white
ergb[1,1,1] =  255. ; ergb[1,1,2]=   255. ;  ergb[1,1,3]=   0.   # yellow
frgb[1,1,1] =  186. ; frgb[1,1,2]=   165. ;  frgb[1,1,3]=   0.   # mud yellow
grgb[1,1,1] =  255. ; grgb[1,1,2]=    60. ;  grgb[1,1,3]=   0.   # red
hrgb[1,1,1] =  255. ; hrgb[1,1,2]=   150. ;  hrgb[1,1,3]= 200.   # pink
irgb[1,1,1] =  255. ; irgb[1,1,2]=   110. ;  irgb[1,1,3]=   0.   # orange
jrgb[1,1,1] =  160. ; jrgb[1,1,2]=   175. ;  jrgb[1,1,3]=   0.   # army green
krgb[1,1,1] =    0. ; krgb[1,1,2]=   255. ;  krgb[1,1,3]= 255.   # cyan
lrgb[1,1,1] =  255. ; lrgb[1,1,2]=    60. ;  lrgb[1,1,3]= 255.   # magenta
mrgb[1,1,1] =  185. ; mrgb[1,1,2]=   120. ;  mrgb[1,1,3]= 255.   # lavender


xaz=float(a*0)

xaz= xaz + a*(argb/255.)
xaz= xaz + b*(brgb/255.)
xaz= xaz + c*(crgb/255.)
xaz= xaz + d*(drgb/255.)
xaz= xaz + e*(ergb/255.)
xaz= xaz + f*(frgb/255.)
xaz= xaz + g*(grgb/255.)
xaz= xaz + h*(hrgb/255.)
xaz= xaz + i*(irgb/255.)
xaz= xaz + j*(jrgb/255.)
xaz= xaz + k*(krgb/255.)
xaz= xaz + l*(lrgb/255.)
xaz= xaz + m*(mrgb/255.)

xout=byte(xaz+0.5)

gbasedim=dim(gbase)
x=gbasedim[1,,]

xout[1:x,,] = gbase[1:x,,]

fout=$2 + "_color-results_2micron-minerals.jpg"

write (xout, filename=fout, type=jpg)

